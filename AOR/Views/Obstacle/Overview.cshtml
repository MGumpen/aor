@model AOR.Models.Data.ObstacleData

@{
    ViewData["Title"] = "Registration Complete";
    Layout = "_Layout";
}

<link rel="stylesheet" href="~/css/Obstacle/Overview.css" />

<section class="container">
    <div class="success-header">
        <div class="success-icon">✅</div>
        <h1>Registration Complete!</h1>
        <div class="obstacle-type-badge badge-@Model.ObstacleType.ToLower()">
            @Model.ObstacleType.ToUpper()
        </div>
        <p class="text-gray-600">Your @Model.ObstacleType.ToLower() obstacle has been successfully registered</p>
    </div>

    <div class="details-grid">
        <div class="detail-card">
            <div class="detail-label">Name</div>
            <div class="detail-value">@Model.ObstacleName</div>
        </div>
        
        <div class="detail-card">
            <div class="detail-label">Type</div>
            <div class="detail-value">@Model.ObstacleType.ToUpper()</div>
        </div>
        
        @if (Model.ObstacleHeight.HasValue)
{
    <div class="detail-card">
        <div class="detail-label">Height</div>
        <div class="detail-value">
            @Model.ObstacleHeight.Value.ToString("F1") m 
            <span style="color: #6b7280; font-size: 0.875rem;">
                (≈ @((Model.ObstacleHeight.Value * 3.28084).ToString("F1")) ft)
            </span>
        </div>
    </div>
}

        
        <div class="detail-card">
            <div class="detail-label">Points</div>
            <div class="detail-value">@Model.PointCount coordinate(s)</div>
        </div>
        
        <div class="detail-card">
            <div class="detail-label">Registered</div>
            <div class="detail-value">@Model.CreatedAt.ToString("dd.MM.yyyy HH:mm")</div>
        </div>
        
        <!-- Type-specific fields -->
        @if (Model.ObstacleType.ToLower() == "powerline")
        {
            @if (Model.WireCount.HasValue)
            {
                <div class="detail-card">
                    <div class="detail-label">Wire Count</div>
                    <div class="detail-value">@Model.WireCount wires</div>
                </div>
            }
        }
        else if (Model.ObstacleType.ToLower() == "mast")
        {
            @if (!string.IsNullOrEmpty(Model.MastType))
            {
                <div class="detail-card">
                    <div class="detail-label">Mast Type</div>
                    <div class="detail-value">@Model.MastType</div>
                </div>
            }
            @if (Model.HasLighting.HasValue)
            {
                <div class="detail-card">
                    <div class="detail-label">Aviation Lighting</div>
                    <div class="detail-value">@(Model.HasLighting.Value ? "Yes" : "No")</div>
                </div>
            }
        }
        else
        {
            @if (!string.IsNullOrEmpty(Model.Category))
            {
                <div class="detail-card">
                    <div class="detail-label">Category</div>
                    <div class="detail-value">@Model.Category</div>
                </div>
            }
        }
    </div>
    
    <!-- Description -->
    @if (!string.IsNullOrEmpty(Model.ObstacleDescription))
    {
        <div class="detail-card" style="margin-bottom: 24px;">
            <div class="detail-label">Description</div>
            <div class="detail-value">@Model.ObstacleDescription</div>
        </div>
    }
    
    <!-- Coordinates -->
    @if (!string.IsNullOrEmpty(Model.Coordinates) && Model.Coordinates != "[]")
    {
        <div class="coordinates-section">
            <h3 style="margin: 0 0 12px 0; color: #0c4a6e;">GPS Coordinates</h3>
            <div class="coordinates-list" id="coordinates-display"></div>
        </div>
    }
    
    <!-- Actions -->
    <div class="actions">
        <a href="/Crew" class="btn btn-primary btn-back">Back to Map</a>
        <a href="/Report/MyReports" class="btn btn-secondary">View your reports</a>
    </div>
</section>

@section Scripts {
    <script src="~/js/Obstacle/Overview.js"></script>
}
